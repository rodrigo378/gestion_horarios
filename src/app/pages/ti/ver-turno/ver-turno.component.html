<!-- component -->
<div class="max-w-[100%] mx-auto">
  <!-- PANEL PRINCIPAL (mismo look & feel del componente de Docentes) -->
  <div
    class="relative flex flex-col w-full h-full text-slate-700 bg-white rounded-2xl shadow-md ring-1 ring-slate-200/70 px-8 sm:px-12 py-6 sm:py-8 bg-clip-border"
  >
    <div class="relative overflow-hidden text-slate-700 bg-white rounded-2xl">
      <!-- Header: título + acciones -->
      <div
        class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 gap-3"
      >
        <div>
          <h3 class="text-2xl font-semibold text-slate-900">Lista Turno</h3>
          <p class="text-slate-500">Lista de todos los turnos:</p>
        </div>

        <div class="flex flex-wrap items-center gap-2 sm:gap-3">
          <!-- Acciones (dejadas intencionalmente vacías, conservando layout) -->
        </div>
      </div>

      <!-- Filtros + botones -->
      <div
        class="flex flex-col sm:flex-row justify-between items-center gap-4 p-3 bg-slate-50/60 rounded-xl ring-1 ring-slate-200/70"
      >
        <!-- Filtros -->
        <div class="flex flex-wrap gap-2 items-center">
          <nz-select
            [(ngModel)]="filtros.n_codper"
            (ngModelChange)="onChangeFacultad('n_codper', $event)"
            class="w-auto h-[30px]"
          >
            <nz-option nzValue="" nzLabel="Periodo"></nz-option>
            <nz-option nzValue="20261" nzLabel="20261"></nz-option>
          </nz-select>

          <nz-select
            [(ngModel)]="filtros.c_codfac"
            (ngModelChange)="onChangeFacultad('facultad', $event)"
            class="w-auto h-[30px]"
          >
            <nz-option nzValue="" nzLabel="Facultad"></nz-option>
            <nz-option nzValue="S" nzLabel="CIENCIAS Y SALUD"></nz-option>
            <nz-option nzValue="E" nzLabel="INGENIERIA Y NEGOCIOS"></nz-option>
          </nz-select>

          <nz-select
            [(ngModel)]="filtros.c_codesp"
            (ngModelChange)="onChangeFacultad('especialidad', $event)"
            class="w-[300px] h-[30px]"
          >
            <nz-option nzValue="" nzLabel="Especialidad"></nz-option>
            @for (especialidad of especialidadesFiltradas; track
            especialidad.codesp) {
            <nz-option
              nzValue="{{ especialidad.codesp }}"
              nzLabel="{{ especialidad.codesp }} - {{ especialidad.nomesp }}"
            ></nz-option>
            }
          </nz-select>

          <nz-select
            [(ngModel)]="filtros.c_codmod"
            (ngModelChange)="onChangeFacultad('modalidad', $event)"
            class="w-auto h-[30px]"
          >
            <nz-option nzValue="" nzLabel="Modalidad"></nz-option>
            <nz-option nzValue="1" nzLabel="Presencial"></nz-option>
            <nz-option nzValue="2" nzLabel="Semipresencial"></nz-option>
            <nz-option nzValue="3" nzLabel="Virtual"></nz-option>
          </nz-select>

          <nz-select
            [(ngModel)]="filtros.n_ciclo"
            (ngModelChange)="onChangeFacultad('ciclo', $event)"
            class="w-auto h-[30px]"
          >
            <nz-option nzValue="" nzLabel="Ciclo"></nz-option>
            <nz-option
              *ngFor="let i of [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]"
              [nzValue]="i"
              [nzLabel]="i"
            ></nz-option>
          </nz-select>

          <nz-select
            [(ngModel)]="filtros.estado"
            (ngModelChange)="onChangeFacultad('estado', $event)"
            class="w-auto h-[30px]"
          >
            <nz-option nzValue="" nzLabel="Estado"></nz-option>
            <nz-option nzValue="0" nzLabel="No asignado"></nz-option>
            <nz-option nzValue="1" nzLabel="Pendiente"></nz-option>
            <nz-option nzValue="2" nzLabel="Asignado"></nz-option>
          </nz-select>
        </div>

        <!-- Botones -->
        <div class="flex gap-2">
          <button
            (click)="clickBloquearTodo()"
            class="inline-flex items-center gap-2 rounded-xl bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-blue-700 transition"
          >
            Blockear Turnos
          </button>
          <button
            (click)="clickDesbloquearTodo()"
            class="inline-flex items-center gap-2 rounded-xl bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-emerald-700 transition"
          >
            Deslockear Turnos
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- SECCIÓN CON TABLA (mismo “borde interno” que en Docentes) -->
  <div class="mt-5 bg-white rounded-xl shadow-sm ring-1 ring-slate-200/70 p-6">
    <div class="w-full overflow-x-auto rounded-xl">
      <div class="min-w-[1000px]">
        <nz-table
          #editRowTable
          #sortTable
          [nzData]="datosFiltrados"
          [nzPageSize]="pageSize"
          [nzPageIndex]="pageIndex"
          [nzTotal]="datosFiltrados.length"
          (nzPageSizeChange)="onPageSizeChange($event)"
          [nzShowSizeChanger]="true"
          nzTableLayout="fixed"
          (nzCurrentPageDataChange)="listOfCurrentPageData = $event"
          [nzPageSizeOptions]="[5, 10, 20, 50, total]"
        >
          <thead class="bg-slate-50">
            <tr class="text-slate-900">
              <th
                nzWidth="6%"
                [(nzChecked)]="checked"
                [nzIndeterminate]="indeterminate"
                (nzCheckedChange)="onAllChecked($event)"
                class="font-semibold"
              ></th>
              @for (column of listOfColumn; track column) {
              <th
                [nzWidth]="column.nzWidth"
                [nzSortFn]="column.compare"
                [nzSortPriority]="column.priority"
                class="font-semibold"
              >
                {{ column.title }}
              </th>
              }
            </tr>
          </thead>

          <tbody class="divide-y divide-slate-100">
            @for (data of editRowTable.data; track data) {
            <tr class="hover:bg-slate-50 transition-colors">
              @if (!editCache[data.id].edit) {
              <td
                [nzChecked]="setOfCheckedId.has(data.id)"
                (nzCheckedChange)="onItemChecked(data.id, $event)"
              ></td>

              <td class="text-slate-700">{{ data.n_codper }}</td>
              <td class="text-slate-700">{{ data.n_codpla }}</td>
              <td class="text-slate-700">{{ data.c_codfac }}</td>
              <td class="text-slate-700">{{ data.c_codesp }}</td>
              <td class="text-slate-700">{{ data.c_grpcur }}</td>
              <td class="text-slate-700">{{ data.n_ciclo }}</td>
              <td class="text-slate-700">{{ data.c_nommod }}</td>

              <td>
                <span
                  [ngClass]="{
                    'bg-emerald-100 text-emerald-700 ring-emerald-600/20':
                      data.estado === 2,
                    'bg-yellow-100 text-yellow-700 ring-yellow-600/20':
                      data.estado === 1,
                    'bg-slate-100 text-slate-600 ring-slate-400/20':
                      data.estado === 0
                  }"
                  class="inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ring-1 ring-inset uppercase"
                >
                  {{
                    data.estado === 2
                      ? "asignado"
                      : data.estado === 0
                      ? "no asignado"
                      : "pendiente"
                  }}
                </span>
              </td>

              <td>
                <span
                  [ngClass]="{
                    'bg-emerald-100 text-emerald-700 ring-emerald-600/20':
                      data.subido_sigu === true,
                    'bg-slate-100 text-slate-600 ring-slate-400/20':
                      data.subido_sigu === false
                  }"
                  class="inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ring-1 ring-inset uppercase"
                >
                  {{ data.subido_sigu === true ? "true" : "false" }}
                </span>
              </td>

              <td>
                <button
                  type="button"
                  (click)="clickAsignarHorario(data.id)"
                  class="text-slate-700 hover:text-slate-900 transition-colors"
                  title="Asignar horario"
                >
                  <i class="fa-solid fa-calendar-days fa-2x"></i>
                </button>
              </td>
              }
            </tr>
            }
          </tbody>
        </nz-table>
      </div>
    </div>
  </div>
</div>
