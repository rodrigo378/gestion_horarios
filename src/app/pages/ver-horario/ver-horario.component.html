<!-- component -->
<div class="lg:flex lg:h-full lg:flex-col">
  <header class="flex items-center justify-between border-b border-gray-200 px-6 py-4 lg:flex-none">
    <h1 class="text-base font-semibold leading-6 text-gray-900">
      <time>{{ monthNames[currentDate.getMonth()] }} {{ currentDate.getFullYear() }}</time>
    </h1>
    <div class="flex flex-col sm:flex-row items-center sm:space-x-4 space-y-2 sm:space-y-0">
      <div class="relative flex items-center w-full sm:w-auto bg-white shadow-sm rounded-md sm:flex-nowrap">
        <!-- BotÃ³n Mes Anterior -->
        <button (click)="changeMonth(-1)" type="button"
          class="h-9 w-10 flex items-center justify-center rounded-l-md border border-gray-300 text-gray-400 hover:text-gray-500 hover:bg-gray-50 transition">
          <span class="sr-only">Mes anterior</span>
          <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z"
              clip-rule="evenodd" />
          </svg>
        </button>
    
        <!-- BotÃ³n Hoy -->
        <button (click)="goToToday()" type="button"
          class="h-9 px-4 text-sm font-semibold text-gray-900 bg-white border border-gray-300 hover:bg-gray-50 transition">
          Hoy
        </button>
    
        <!-- BotÃ³n Mes Siguiente -->
        <button (click)="changeMonth(1)" type="button"
          class="h-9 w-10 flex items-center justify-center rounded-r-md border border-gray-300 text-gray-400 hover:text-gray-500 hover:bg-gray-50 transition">
          <span class="sr-only">PrÃ³ximo mes</span>
          <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"
              clip-rule="evenodd" />
          </svg>
        </button>
      </div>
    
      <!-- Select para cambiar de mes -->
      <select (change)="selectMonth($event)"
        class="border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block p-2 shadow-sm w-full sm:w-auto">
        <option *ngFor="let month of monthNames; let i = index" [value]="i" [selected]="i === currentDate.getMonth()">
          {{ month }}
        </option>
      </select>
    </div>
  </header>
  <div class="shadow ring-1 ring-black ring-opacity-5 lg:flex lg:flex-auto lg:flex-col">
    <div class="grid grid-cols-7 gap-px border-b border-gray-300 bg-gray-200 text-center text-xs font-semibold leading-6 text-gray-700 lg:flex-none">
      <div class="flex justify-center bg-white py-2">
        <span>L</span>
        <span class="sr-only sm:not-sr-only">unes</span>
      </div>
      <div class="flex justify-center bg-white py-2">
        <span>M</span>
        <span class="sr-only sm:not-sr-only">artes</span>
      </div>
      <div class="flex justify-center bg-white py-2">
        <span>M</span>
        <span class="sr-only sm:not-sr-only">iercoles</span>
      </div>
      <div class="flex justify-center bg-white py-2">
        <span>J</span>
        <span class="sr-only sm:not-sr-only">ueves</span>
      </div>
      <div class="flex justify-center bg-white py-2">
        <span>V</span>
        <span class="sr-only sm:not-sr-only">iernes</span>
      </div>
      <div class="flex justify-center bg-white py-2">
        <span>S</span>
        <span class="sr-only sm:not-sr-only">abado</span>
      </div>
      <div class="flex justify-center bg-white py-2">
        <span>D</span>
        <span class="sr-only sm:not-sr-only">omingo</span>
      </div>
    </div>
    <div class="flex bg-gray-200 text-xs leading-6 text-gray-700 lg:flex-auto">
      <div class="isolate grid w-full grid-cols-7 grid-rows-6 gap-px lg:flex-auto">
        <!-- Espacios vacÃ­os antes del primer dÃ­a del mes -->
        <div *ngFor="let empty of [].constructor(firstDayOfMonth)" class="bg-gray-50 py-2 px-3"></div>
        <!-- Botones con los dÃ­as del mes y eventos -->
        <button *ngFor="let day of daysInMonth" type="button"
          class="relative flex h-24 flex-col items-start bg-white px-3 py-2 text-gray-900 hover:bg-gray-100 focus:z-10"
          [ngClass]="{ 'border border-blue-900': isToday(day) }">
          <!-- CÃ­rculo con el nÃºmero del dÃ­a -->
          <span class="absolute top-2 left-2 flex h-6 w-6 items-center justify-center rounded-full text-sm"
            [ngClass]="{ 'bg-blue-900 text-white font-bold': isToday(day), 'text-gray-900': !isToday(day) }">
            {{ day }}
          </span>
          <!-- BotÃ³n de evento: Normal en PC, icono en celular -->
          <button *ngIf="classSchedule[currentDate.getMonth() + 1]?.[day]" (click)="openModal(day)"
            class="absolute bottom-2 right-2 bg-blue-900 text-white text-xs px-3 py-1 rounded-lg shadow-md hidden sm:block hover:bg-blue-900 transition">
            Ver horario
          </button>

          <!-- BotÃ³n en modo celular: PequeÃ±o cÃ­rculo con icono -->
          <button *ngIf="classSchedule[currentDate.getMonth() + 1]?.[day]" (click)="openModal(day)"
            class="absolute bottom-2 right-2 bg-blue-900 text-white w-5 h-5 flex items-center justify-center rounded-full shadow-md sm:hidden hover:bg-blue-900 transition">
            <i class="fa-solid fa-eye"></i>
          </button>
        </button>
      </div>
    </div>
    
  </div>
</div>

<!-- MODAL -->
<div *ngIf="showModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
  <div class="bg-white p-6 rounded-lg w-96 shadow-xl relative">
    <!-- BotÃ³n de Cierre (X) -->
    <button (click)="closeModal()" class="absolute top-3 right-3 bg-gray-200 hover:bg-gray-400 text-gray-700 hover:text-white rounded-full w-8 h-8 flex items-center justify-center shadow-md transition">
      <i class="fa-solid fa-xmark text-lg"></i>
    </button>
    <!-- TÃ­tulo del Modal -->
    <h2 class="text-xl font-bold text-blue-900 text-center mb-4">
      ğŸ“… Horario para el dÃ­a {{ selectedDay }}
    </h2>
    <!-- Lista de Eventos -->
    <ol class="relative border-l-2 border-blue-900 pl-4">
      <li *ngFor="let event of selectedClasses" class="mb-4">
        <div class="absolute w-3 h-3 bg-blue-900 rounded-full -left-1.5 border border-white"></div>
        <h3 class="text-lg font-semibold text-gray-900">{{ event.subject }}</h3>
        <p class="text-sm font-medium text-gray-600">â° {{ event.time }}</p>
        <p class="text-sm text-gray-700">ğŸ› Facultad: <span class="font-semibold">{{ event.faculty }}</span></p>
        <p class="text-sm text-gray-700">ğŸ“š Ciclo: <span class="font-semibold">{{ event.cycle }}</span></p>
        <p class="text-sm text-gray-700">ğŸ“ Piso: <span class="font-semibold">{{ event.floor }}</span></p>
        <p class="text-sm text-gray-700"> ğŸ’» Modalidad: <span class="font-semibold">{{ event.modality }}</span></p>
      </li>
    </ol>
    <!-- BotÃ³n de Cierre -->
    <div class="flex justify-center mt-6">
      <button (click)="closeModal()" class="bg-red-600 hover:bg-red-700 text-white font-semibold px-6 py-2 rounded-lg shadow-md transition">
        Cerrar
      </button>
    </div>
  </div>
</div>
