<div class="shadow-lg p-3 bg-white rounded-lg">
  <p class="text-2xl font-bold">Asignaci贸n de horarios</p>
  <p class="text-slate-500 mt-1">Asigne horarios a los docentes:</p>
</div>

<!-- Filtros -->
<div class="flex flex-wrap gap-4 p-4 bg-white shadow-md rounded-lg mt-5">

  <!-- Select de Facultad -->
  <div class="flex flex-col w-56">
    <label class="text-sm font-semibold">Facultad</label>
    <select [(ngModel)]="facultadSeleccionada" (change)="onFacultadChange()"
      class="p-2 border rounded-lg bg-gray-100 focus:ring-2 focus:ring-blue-500">
      <option value="">Selecciona una facultad</option>
      <option *ngFor="let facultad of facultades" [value]="facultad.codigo">
        {{ facultad.nombre }}
      </option>
    </select>
  </div>

<!-- Select de Carrera (Especialidad) -->
<div class="flex flex-col w-96">
  <label class="text-sm font-semibold">Carrera / Especialidad</label>
  <select [(ngModel)]="carreraSeleccionada"
    class="p-2 border rounded-lg bg-gray-100 focus:ring-2 focus:ring-blue-500" 
    [disabled]="carreras.length === 0">
    <option value="">Selecciona una especialidad</option>
    <option *ngFor="let carrera of carreras" [value]="carrera">
      {{ carrera }}
    </option>
  </select>
</div>

  <!-- Select de Ciclo -->
  <div class="flex flex-col w-24">
    <label class="text-sm font-semibold">Ciclo</label>
    <select [(ngModel)]="cicloSeleccionado" (change)="onCicloChange()"
      class="p-2 border rounded-lg bg-gray-100 focus:ring-2 focus:ring-blue-500" [disabled]="!ciclos.length">
      <option value="">Selecciona un ciclo</option>
      <option *ngFor="let ciclo of ciclos" [value]="ciclo">
        {{ ciclo }}
      </option>
    </select>
  </div>

  <!-- Select de Turno -->
  <div class="flex flex-col w-28">
    <label class="text-sm font-semibold">Turno</label>
    <select [(ngModel)]="turnoSeleccionado" (change)="aplicarFiltrosYActualizarTexto()"
      class="p-2 border rounded-lg bg-gray-100 focus:ring-2 focus:ring-blue-500">
      <option value="">Todos</option>
      <option *ngFor="let turno of turnos" [value]="turno">{{ turno }}</option>
    </select>
  </div>
  
  <!-- Select de Secci贸n -->
  <div class="flex flex-col w-24">
    <label class="text-sm font-semibold">Secci贸n</label>
    <select [(ngModel)]="seccionSeleccionada" (change)="aplicarFiltrosYActualizarTexto()"
      class="p-2 border rounded-lg bg-gray-100 focus:ring-2 focus:ring-blue-500">
      <option value="">Todos</option>
      <option *ngFor="let seccion of secciones" [value]="seccion">{{ seccion }}</option>
    </select>
  </div>
</div>

<div class="flex flex-wrap gap-4 p-4 bg-white shadow-md rounded-lg mt-5">
  <span class="font-bold" mar *ngIf="textoFiltros">{{ textoFiltros }}</span>
  <span *ngIf="!textoFiltros" class="text-gray-500 font-bold">No hay filtros seleccionados</span>
</div>

<!--  Calendario -->
<full-calendar 
    [options]="calendarOptions" 
    class="mt-5 shadow-lg bg-white p-5 rounded-lg border border-gray-200">
</full-calendar>

<!--  Modal para agregar eventos con animaci贸n -->
<div *ngIf="isModalOpen" 
      id="modal-evento"
      @fadeInOut 
      class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
  
  <div class="bg-white p-6 rounded-lg shadow-lg w-96 transition-opacity duration-500">
    <h2 class="text-lg font-bold text-gray-700 mb-4">Agregar Evento</h2>

    <!--  Formulario para agregar eventos -->
    <label class="block text-gray-600">Modalidad</label>
    <select [(ngModel)]="modalidadSeleccionada" (change)="filtrarCursosPorModalidadYTipoHoras()"
            class="w-full p-2 border rounded mb-3 bg-gray-100 focus:ring-2 focus:ring-blue-500">
      <option *ngFor="let modalidad of modalidades" [value]="modalidad.id">
        {{ modalidad.nombre }}
      </option>
    </select>

<!-- Selecci贸n de Tipo de Horas -->
  <ul class="items-center w-full text-sm font-medium text-gray-900 bg-white border border-gray-600 rounded-lg sm:flex">
    <li class="w-full border-b border-gray-600 sm:border-b-0 sm:border-r">
      <div class="flex items-center ps-3">
          <input id="horas-teoria" type="radio" value="n_ht" name="tipoHoras" [(ngModel)]="tipoHorasSeleccionado" 
                  (change)="filtrarCursosPorModalidadYTipoHoras()" 
                  class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 focus:ring-2">
          <label for="horas-teoria" class="w-full py-3 ms-2 text-sm font-medium text-gray-900">Horas Teor铆a</label>
      </div>
    </li>
    <li class="w-full border-b  sm:border-b-0 sm:border-r">
        <div class="flex items-center ps-3">
            <input id="horas-practica" type="radio" value="n_hp" name="tipoHoras" [(ngModel)]="tipoHorasSeleccionado" 
                    (change)="filtrarCursosPorModalidadYTipoHoras()" 
                    class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 focus:ring-2">
            <label for="horas-practica" class="w-full py-3 ms-2 text-sm font-medium text-gray-900">Horas Pr谩ctica</label>
        </div>
    </li>
  </ul>

    
    <label class="block text-gray-600">Cursos</label>
    <select [(ngModel)]="cursoSeleccionado"
            class="w-full p-2 border rounded mb-3 bg-gray-100 focus:ring-2 focus:ring-blue-500">
      <option value="">Selecciona un curso</option>
      <option *ngFor="let curso of cursosFiltrados" [value]="curso.nombre">
        {{ curso.nombre }} - {{ curso.horas }}h
      </option>
    </select>

    <label class="block text-gray-600">Fecha y Hora de Inicio</label>
    <input type="datetime-local" [(ngModel)]="newEvent.start" class="w-full p-2 border rounded mb-3">
    
    <label class="block text-gray-600">Fecha y Hora de Fin</label>
    <input type="datetime-local" [(ngModel)]="newEvent.end" class="w-full p-2 border rounded mb-3" readonly disabled="">
    
    <label class="block text-gray-600">Color del Evento</label>
    <div class="flex space-x-2">
      <input type="color" [(ngModel)]="newEvent.color" class="w-10 h-10 cursor-pointer border rounded">
      <!-- Colores sugeridos -->
      <div class="flex space-x-1">
        <button *ngFor="let color of suggestedColors" 
                [style.background]="color" 
                class="w-8 h-8 rounded-full border cursor-pointer"
                (click)="selectColor(color)">
        </button>
      </div>
    </div>

    <!--  Botones -->
    <div class="flex justify-end space-x-2 mt-4">
      <button (click)="cerrarModalAnimado('modal-evento', closeModal.bind(this))" class="bg-gray-500 text-white px-3 py-1 rounded">Cancelar</button>
      <button (click)="saveEvent()" class="bg-blue-500 text-white px-3 py-1 rounded">Guardar</button>
    </div>    
  </div>
</div>

<!--  Modal para ver detalles del evento con animaci贸n -->
<div *ngIf="isEventDetailsModalOpen" 
      id="modal-detalles-evento"
      @fadeInOut 
      class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
  
  <div class="bg-white p-6 rounded-lg shadow-lg w-96 transition-opacity duration-500">
    <h2 class="text-lg font-bold text-gray-700 mb-4">Detalles del Evento</h2>

    <label class="block text-gray-600">Curso</label>
    <select [(ngModel)]="selectedEventCopy.title" class="w-full p-2 border rounded mb-3">
      <option *ngFor="let curso of cursos" [value]="curso.nombre">{{ curso.nombre }} - {{ curso.horas }}</option>
    </select>

    <label class="block text-gray-600">Fecha y Hora de Inicio</label>
    <input type="datetime-local" [(ngModel)]="selectedEventCopy.start" 
          class="w-full p-2 border rounded mb-3">
    
    <label class="block text-gray-600">Fecha y Hora de Fin</label>
    <input type="datetime-local" [(ngModel)]="selectedEventCopy.end" 
          class="w-full p-2 border rounded mb-3"
          readonly disabled="">
    
    <label class="block text-gray-600">Docente Asignado</label>
    <select [(ngModel)]="selectedTeacher" class="w-full p-2 border rounded mb-3">
      <option value="">Seleccione un Docente</option>
      <option *ngFor="let teacher of teachers" [value]="teacher">{{ teacher }}</option>
    </select>

    <label class="block text-gray-600">Color del Evento</label>
    <input type="color" [(ngModel)]="selectedEventCopy.color" class="w-full p-2 border rounded mb-3" 
            [value]="selectedEventCopy.color">
    

    <!--  Botones -->
    <div class="flex justify-between space-x-2 mt-4">
      <button (click)="deleteEvent()" class="bg-red-500 text-white px-3 py-1 rounded">Eliminar</button>
      <div class="flex space-x-2">
        <button (click)="saveEditedEvent()" class="bg-blue-500 text-white px-3 py-1 rounded">Guardar Cambios</button>
        <button (click)="cerrarModalDetallesConAnimacion()" class="bg-gray-500 text-white px-3 py-1 rounded">Cerrar</button>
      </div>
    </div>
  </div>
</div>
